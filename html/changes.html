<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Changes from version 3.2 to 3.3 &mdash; TreeCorr  documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="TreeCorr  documentation" href="index.html" />
    <link rel="next" title="Previous History" href="history.html" />
    <link rel="prev" title="The corr2 and corr3 driver scripts" href="corr2.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="history.html" title="Previous History"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="corr2.html" title="The corr2 and corr3 driver scripts"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">TreeCorr  documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="changes-from-version-3-2-to-3-3">
<h1>Changes from version 3.2 to 3.3<a class="headerlink" href="#changes-from-version-3-2-to-3-3" title="Permalink to this headline">¶</a></h1>
<p>The numbers at the ends of some items below indicate which issue is connected
with the change:</p>
<p><a class="reference external" href="https://github.com/rmjarvis/TreeCorr/issues?q=milestone%3A%22Version+3.3%22+is%3Aclosed">https://github.com/rmjarvis/TreeCorr/issues?q=milestone%3A%22Version+3.3%22+is%3Aclosed</a></p>
<div class="section" id="dependency-change">
<h2>Dependency change:<a class="headerlink" href="#dependency-change" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Switched from using ctypes (which is native to python) to cffi for the C++
wrapping.  This should be a seamless change, since setup.py should download
cffi for you if you need it, but it does require libffi to be installed
on your system.  This is usually already true, but if not, see the cffi
docs here: <a class="reference external" href="https://cffi.readthedocs.org/en/latest/installation.html">https://cffi.readthedocs.org/en/latest/installation.html</a>
for platform-specific instructions for installing libffi.</li>
<li>Made fitsio a required dependency, rather than allowing astropy.io.fits or
pyfits as an optional way to read/write FITS files.  The fitsio package is
almost always faster, and it&#8217;s an easy dependency, since it is installable
via either pip or easy_install.</li>
</ul>
</div>
<div class="section" id="api-changes">
<h2>API changes:<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Changed the default configuration format to be based on the file extension.
If your config file is named _something_.params, then it will still work
the same way.  Otherwise, you may need to add &#8216;-f params&#8217; when you run
corr2 or corr3. (#18)</li>
<li>Changed the attributes <tt class="docutils literal"><span class="pre">min_sep</span></tt>, <tt class="docutils literal"><span class="pre">max_sep</span></tt>, and <tt class="docutils literal"><span class="pre">logr</span></tt> to have units
of <tt class="docutils literal"><span class="pre">sep_units</span></tt> if they are given, rather than radians.  The previous
behavior was somewhat confusing.  (#39)</li>
<li>Changed the output separations to convert from the chord distance to the
corresponding great circle distance when using spherical coordinates.  (#39)</li>
<li>Removed the <tt class="docutils literal"><span class="pre">z_units</span></tt> option for <tt class="docutils literal"><span class="pre">Catalog</span></tt>, since it doesn&#8217;t actually
make sense.  Any <tt class="docutils literal"><span class="pre">z</span></tt> field should be in physical units, not arcsec,
degrees, etc.</li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New features:<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added support for YAML and JSON configuration files.  YAML is now the
recommended format.  If your config file ends with &#8216;.yaml&#8217;, then this
will automatically be used.  If it ends with &#8216;.params&#8217;, the old parameter
list style will be used.  And if it ends with &#8216;.json&#8217;, JSON will be used.
You can also specify the format directly with the -f (or &#8211;file_type)
command-line argument for corr2 and corr3. (#18)</li>
<li>Added <tt class="docutils literal"><span class="pre">min_rpar</span></tt> and <tt class="docutils literal"><span class="pre">max_rpar</span></tt> options for the Rperp metric (as well
as the new Rlens metric &#8211; see below) to set the minimum and maximum
separations in the r_parallel direction. (#34)</li>
<li>Added new metric Arc, which calculates the true great circle separation
throughout the calculation, rather than calculating chord distances and
then converting to the corresponding angles at the end.  Most people will
prefer the speed of the chord distances, but this provides a way to compare
the accuracy of the two approaches. (#39)</li>
<li>Added a new split_method=&#8217;random&#8217;, which chooses a random point between the
25th percentile and 75th percentile at which to make the split each time.
This is potentially useful when the large-scale shape of your field is very
regular (e.g. a perfect rectangle) to avoid numerical issues related to the
larger cells all having identical shapes.  (#40)</li>
<li>Added new metric Rlens, which is the projected separation at the distance of
the lens (here taken to be the object in the first catalog of the cross-
correlation). (#41)</li>
<li>Changed the write commands to create the output directory if necessary. (#42)</li>
<li>Made the C and C++ header files be installed along with the python code and
the compiled library.  So in case anyone wants to use the C++ code directly
in another application, rather than through the python interface, that&#8217;s now
easier to do.  The directory to add to the include path is available as
<tt class="docutils literal"><span class="pre">treecorr.include_dir</span></tt> and the library to link is <tt class="docutils literal"><span class="pre">treecorr.lib_file</span></tt>.</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h2>Bug fixes:<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fixed a bug where num_threads=1 didn&#8217;t actually do anything, so it wasn&#8217;t
possible to get TreeCorr not to use multi-threading.  Thanks to Eric Baxter
for this bug report.</li>
<li>Fixed a big where 3-pt correlations could sometimes seg fault due to a
calculation coming out as nan. (#42)</li>
</ul>
</div>
<div class="section" id="version-3-3-1-bug-fix">
<h2>Version 3.3.1 bug fix:<a class="headerlink" href="#version-3-3-1-bug-fix" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fixed a bug where numerical rounding imprecision could let dsq come out
negative for the Rperp metric if the lens and source were identical (i.e.
had the same position, so dsq should be 0).</li>
</ul>
</div>
<div class="section" id="version-3-3-2-bug-fix">
<h2>Version 3.3.2 bug fix:<a class="headerlink" href="#version-3-3-2-bug-fix" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fixed a problem with pip installation on linux boxes that the include files
were not being installed into the right place.</li>
</ul>
</div>
<div class="section" id="version-3-3-3-bug-fix">
<h2>Version 3.3.3 bug fix:<a class="headerlink" href="#version-3-3-3-bug-fix" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fixed an error when writing output files in the current directory.</li>
</ul>
</div>
<div class="section" id="version-3-3-4-bug-fix">
<h2>Version 3.3.4 bug fix:<a class="headerlink" href="#version-3-3-4-bug-fix" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fixed an error in how the corr3 script calculates the compensated nnn
statistic.</li>
</ul>
</div>
<div class="section" id="version-3-3-5-bug-fixes">
<h2>Version 3.3.5 bug fixes:<a class="headerlink" href="#version-3-3-5-bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added an exception if sep_units is used with either Rperp or Rlens.  This
would really be a user error, not a TreeCorr bug, but it was not obvious
that this was invalid, so raising the exception should help users notice
the error.</li>
<li>Added a timeout for the ffi question in setup.py to avoid pip installation
hanging. (#45)</li>
</ul>
</div>
<div class="section" id="version-3-3-6-bug-fixes">
<h2>Version 3.3.6 bug fixes:<a class="headerlink" href="#version-3-3-6-bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fixed an import error in some installations with Python 3 where the library
file gets a different name like _treecorr.cpython-34m.so or similar.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Changes from version 3.2 to 3.3</a><ul>
<li><a class="reference internal" href="#dependency-change">Dependency change:</a></li>
<li><a class="reference internal" href="#api-changes">API changes:</a></li>
<li><a class="reference internal" href="#new-features">New features:</a></li>
<li><a class="reference internal" href="#bug-fixes">Bug fixes:</a></li>
<li><a class="reference internal" href="#version-3-3-1-bug-fix">Version 3.3.1 bug fix:</a></li>
<li><a class="reference internal" href="#version-3-3-2-bug-fix">Version 3.3.2 bug fix:</a></li>
<li><a class="reference internal" href="#version-3-3-3-bug-fix">Version 3.3.3 bug fix:</a></li>
<li><a class="reference internal" href="#version-3-3-4-bug-fix">Version 3.3.4 bug fix:</a></li>
<li><a class="reference internal" href="#version-3-3-5-bug-fixes">Version 3.3.5 bug fixes:</a></li>
<li><a class="reference internal" href="#version-3-3-6-bug-fixes">Version 3.3.6 bug fixes:</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="corr2.html"
                        title="previous chapter">The corr2 and corr3 driver scripts</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="history.html"
                        title="next chapter">Previous History</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/changes.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="history.html" title="Previous History"
             >next</a> |</li>
        <li class="right" >
          <a href="corr2.html" title="The corr2 and corr3 driver scripts"
             >previous</a> |</li>
        <li><a href="index.html">TreeCorr  documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Mike Jarvis.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>