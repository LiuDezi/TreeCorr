<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>NNN: Count-count-count correlations &mdash; TreeCorr  documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="TreeCorr  documentation" href="index.html" />
    <link rel="up" title="Three-point Correlation Functions" href="correlation3.html" />
    <link rel="next" title="GGG: Shear-shear-shear correlations" href="ggg.html" />
    <link rel="prev" title="Three-point Correlation Functions" href="correlation3.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ggg.html" title="GGG: Shear-shear-shear correlations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="correlation3.html" title="Three-point Correlation Functions"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">TreeCorr  documentation</a> &raquo;</li>
          <li><a href="correlation3.html" accesskey="U">Three-point Correlation Functions</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="nnn-count-count-count-correlations">
<h1>NNN: Count-count-count correlations<a class="headerlink" href="#nnn-count-count-count-correlations" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="treecorr.NNNCorrelation">
<em class="property">class </em><tt class="descclassname">treecorr.</tt><tt class="descname">NNNCorrelation</tt><big>(</big><em>config=None</em>, <em>logger=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">treecorr.binnedcorr3.BinnedCorr3</span></tt></p>
<p>This class handles the calculation and storage of a 2-point count-count correlation
function.  i.e. the regular density correlation function.</p>
<p>See the doc string of <a class="reference internal" href="correlation3.html#treecorr.BinnedCorr3" title="treecorr.BinnedCorr3"><tt class="xref py py-class docutils literal"><span class="pre">BinnedCorr3</span></tt></a> for a description of how the triangles
are binned.</p>
<p>Ojects of this class holds the following attributes:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">nbins:</th><td class="field-body">The number of bins in logr where r = d2</td>
</tr>
<tr class="field-even field"><th class="field-name">bin_size:</th><td class="field-body">The size of the bins in logr</td>
</tr>
<tr class="field-odd field"><th class="field-name">min_sep:</th><td class="field-body">The minimum separation being considered</td>
</tr>
<tr class="field-even field"><th class="field-name">max_sep:</th><td class="field-body">The maximum separation being considered</td>
</tr>
<tr class="field-odd field"><th class="field-name">nubins:</th><td class="field-body">The number of bins in u where u = d3/d2</td>
</tr>
<tr class="field-even field"><th class="field-name">ubin_size:</th><td class="field-body">The size of the bins in u</td>
</tr>
<tr class="field-odd field"><th class="field-name">min_u:</th><td class="field-body">The minimum u being considered</td>
</tr>
<tr class="field-even field"><th class="field-name">max_u:</th><td class="field-body">The maximum u being considered</td>
</tr>
<tr class="field-odd field"><th class="field-name">nvbins:</th><td class="field-body">The number of bins in v where v = +-(d1-d2)/d3</td>
</tr>
<tr class="field-even field"><th class="field-name">vbin_size:</th><td class="field-body">The size of the bins in v</td>
</tr>
<tr class="field-odd field"><th class="field-name">min_v:</th><td class="field-body">The minimum v being considered</td>
</tr>
<tr class="field-even field"><th class="field-name">max_v:</th><td class="field-body">The maximum v being considered</td>
</tr>
<tr class="field-odd field"><th class="field-name">logr1d:</th><td class="field-body">The nominal centers of the nbins bins in log(r).</td>
</tr>
<tr class="field-even field"><th class="field-name">u1d:</th><td class="field-body">The nominal centers of the nubins bins in u.</td>
</tr>
<tr class="field-odd field"><th class="field-name">v1d:</th><td class="field-body">The nominal centers of the nvbins bins in v.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>In addition, the following attributes are numpy arrays whose shape is (nbins, nubins, nvbins):</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">logr:</th><td class="field-body">The nominal center of the bin in log(r).</td>
</tr>
<tr class="field-even field"><th class="field-name">rnom:</th><td class="field-body">The nominal center of the bin converted to regular distance. 
i.e. r = exp(logr).</td>
</tr>
<tr class="field-odd field"><th class="field-name">u:</th><td class="field-body">The nominal center of the bin in u.</td>
</tr>
<tr class="field-even field"><th class="field-name">v:</th><td class="field-body">The nominal center of the bin in v.</td>
</tr>
<tr class="field-odd field"><th class="field-name">meand1:</th><td class="field-body">The (weighted) mean value of d1 for the triangles in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">meanlogd1:</th><td class="field-body">The mean value of log(d1) for the triangles in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">meand2:</th><td class="field-body">The (weighted) mean value of d2 (aka r) for the triangles in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">meanlogd2:</th><td class="field-body">The mean value of log(d2) for the triangles in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">meand2:</th><td class="field-body">The (weighted) mean value of d3 for the triangles in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">meanlogd2:</th><td class="field-body">The mean value of log(d3) for the triangles in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">meanu:</th><td class="field-body">The mean value of u for the triangles in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">meanv:</th><td class="field-body">The mean value of v for the triangles in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">weight:</th><td class="field-body">The total weight in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">ntri:</th><td class="field-body">The number of triangles in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">tot:</th><td class="field-body">The total number of triangles processed, which is used to normalize
the randoms if they have a different number of triangles.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>If <cite>sep_units</cite> are given (either in the config dict or as a named kwarg) then the distances
will all be in these units.  Note however, that if you separate out the steps of the 
<tt class="xref py py-func docutils literal"><span class="pre">process()</span></tt> command and use <tt class="xref py py-func docutils literal"><span class="pre">process_auto()</span></tt> and/or <tt class="xref py py-func docutils literal"><span class="pre">process_cross()</span></tt>, then the
units will not be applied to :meanr: or :meanlogr: until the <tt class="xref py py-func docutils literal"><span class="pre">finalize()</span></tt> function is
called.</p>
<p>The typical usage pattern is as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nnn</span> <span class="o">=</span> <span class="n">treecorr</span><span class="o">.</span><span class="n">NNNCorrelation</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nnn</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>         <span class="c"># For auto-correlation.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nnn</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">cat1</span><span class="p">,</span><span class="n">cat2</span><span class="p">,</span><span class="n">cat3</span><span class="p">)</span>   <span class="c"># For cross-correlation.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rrr</span><span class="o">.</span><span class="n">process</span><span class="o">...</span>           <span class="c"># Likewise for random-random correlations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drr</span><span class="o">.</span><span class="n">process</span><span class="o">...</span>           <span class="c"># If desired, also do data-random correlations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rdr</span><span class="o">.</span><span class="n">process</span><span class="o">...</span>           <span class="c"># ... in all three</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rrd</span><span class="o">.</span><span class="n">process</span><span class="o">...</span>           <span class="c"># ... permutations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rdd</span><span class="o">.</span><span class="n">process</span><span class="o">...</span>           <span class="c"># Also with two data and one random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drd</span><span class="o">.</span><span class="n">process</span><span class="o">...</span>           <span class="c"># ... in all three</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ddr</span><span class="o">.</span><span class="n">process</span><span class="o">...</span>           <span class="c"># ... permutations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nn</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span><span class="n">rrr</span><span class="p">,</span><span class="n">drr</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>  <span class="c"># Write out to a file.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zeta</span><span class="p">,</span><span class="n">varzeta</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">calculateZeta</span><span class="p">(</span><span class="n">rrr</span><span class="p">,</span><span class="n">drr</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>  <span class="c"># Or get the 3pt function directly.</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config</strong> &#8211; A configuration dict that can be used to pass in kwargs if desired.
This dict is allowed to have addition entries in addition to those listed
in <a class="reference internal" href="correlation3.html#treecorr.BinnedCorr3" title="treecorr.BinnedCorr3"><tt class="xref py py-class docutils literal"><span class="pre">BinnedCorr3</span></tt></a>, which are ignored here. (default: None)</li>
<li><strong>logger</strong> &#8211; If desired, a logger object for logging. (default: None, in which case
one will be built according to the config dict&#8217;s verbose level.)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>See the documentation for <a class="reference internal" href="correlation3.html#treecorr.BinnedCorr3" title="treecorr.BinnedCorr3"><tt class="xref py py-class docutils literal"><span class="pre">BinnedCorr3</span></tt></a> for the list of other allowed kwargs,
which may be passed either directly or in the config dict.</p>
<dl class="method">
<dt id="treecorr.NNNCorrelation.calculateZeta">
<tt class="descname">calculateZeta</tt><big>(</big><em>rrr</em>, <em>drr=None</em>, <em>rdr=None</em>, <em>rrd=None</em>, <em>ddr=None</em>, <em>drd=None</em>, <em>rdd=None</em><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation.calculateZeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the 3pt function given another 3pt function of random
points using the same mask, and possibly cross correlations of the data and random.</p>
<p>There are two possible formulae that are currently supported.</p>
<ol class="arabic">
<li><p class="first">The simplest formula to use is <span class="math">\(\zeta^\prime = (DDD-RRR)/RRR\)</span>.
In this case, only rrr needs to be given, the NNNCorrelation of a random field.
However, note that in this case, the return value is not normally called <span class="math">\(\zeta\)</span>.
Rather, this is an estimator of</p>
<div class="math">
\[\zeta^\prime(d1,d2,d3) = \zeta(d1,d2,d3) + \xi(d1) + \xi(d2) + \xi(d3)\]</div>
<p>where <span class="math">\(\xi\)</span> is the two-point correlation function for each leg of the triangle.
You would typically want to calculate that separately and subtract off the
two-point contributions.</p>
</li>
<li><p class="first">For auto-correlations, a better formula is 
<span class="math">\(\zeta = (DDD-DDR-DRD-RDD+DRR+RDR+RRD-RRR)/RRR\)</span>.
In this case, DDR, etc. calculate the triangles where two points come from either
the data or the randoms.  In the case of DDR for instance, points x1 and x2 on the 
triangle have data and x3 uses randoms, where points x1, x2, x3 are opposite sides 
d1, d2, d3 with d1 &gt; d2 &gt; d3 as usual; RDR has randoms at 1,3 and data at 2, etc.</p>
</li>
</ol>
<ul class="simple">
<li>If only rrr is provided, the first formula will be used.</li>
<li>If all of rrr, drr, rdr, rrd, ddr, drd, rdd are provided then the second will be used.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rrr</strong> &#8211; An NNCorrelation object for the random field.</li>
<li><strong>drr</strong> &#8211; DRR if desired. (default: None)</li>
<li><strong>rdr</strong> &#8211; RDR if desired. (default: None)</li>
<li><strong>rrd</strong> &#8211; RRD if desired. (default: None)</li>
<li><strong>ddr</strong> &#8211; DDR if desired. (default: None)</li>
<li><strong>drd</strong> &#8211; DRD if desired. (default: None)</li>
<li><strong>rdd</strong> &#8211; RDD if desired. (default: None)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(zeta, varzeta) as a tuple</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="treecorr.NNNCorrelation.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the data vectors</p>
</dd></dl>

<dl class="method">
<dt id="treecorr.NNNCorrelation.finalize">
<tt class="descname">finalize</tt><big>(</big><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize the calculation of meand1, meanlogd1, etc.</p>
<p>The process_auto and process_cross commands accumulate values in each bin,
so they can be called multiple times if appropriate.  Afterwards, this command
finishes the calculation of meanlogr, meanu, meanv by dividing by the total weight.</p>
</dd></dl>

<dl class="method">
<dt id="treecorr.NNNCorrelation.process">
<tt class="descname">process</tt><big>(</big><em>cat1</em>, <em>cat2=None</em>, <em>cat3=None</em>, <em>metric=None</em>, <em>num_threads=None</em><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Accumulate the number of triangles of points between cat1, cat2, and cat3.</p>
<ul class="simple">
<li>If only 1 argument is given, then compute an auto-correlation function.</li>
<li>If 2 arguments are given, then compute a cross-correlation function with the 
first catalog taking two corners of the triangles. (Not implemented yet.)</li>
<li>If 3 arguments are given, then compute a cross-correlation function.</li>
</ul>
<p>All arguments may be lists, in which case all items in the list are used 
for that element of the correlation.</p>
<p>Note: For a correlation of multiple catalogs, it matters which corner of the
triangle comes from which catalog.  The final accumulation will have 
d1 &gt; d2 &gt; d3 where d1 is between two points in cat2,cat3; d2 is between 
points in cat1,cat3; and d3 is between points in cat1,cat2.  To accumulate
all the possible triangles between three catalogs, you should call this
multiple times with the different catalogs in different positions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cat1</strong> &#8211; A catalog or list of catalogs for the first N field.</li>
<li><strong>cat2</strong> &#8211; A catalog or list of catalogs for the second N field, if any.
(default: None)</li>
<li><strong>cat3</strong> &#8211; A catalog or list of catalogs for the third N field, if any.
(default: None)</li>
<li><strong>metric</strong> &#8211; <p>Which metric to use for distance measurements.  Options are:</p>
<ul>
<li>&#8216;Euclidean&#8217; = straight line Euclidean distance between two points.
For spherical coordinates (ra,dec without r), this is the chord
distance between points on the unit sphere.</li>
<li>&#8216;Rperp&#8217; = the perpendicular component of the distance. For two points
with distance from Earth <cite>r1, r2</cite>, if <cite>d</cite> is the normal Euclidean 
distance and <span class="math">\(Rparallel = |r1-r2|\)</span>, then we define
<span class="math">\(Rperp^2 = d^2 - Rparallel^2\)</span>.</li>
<li>&#8216;Rlens&#8217; = the projected distance perpendicular to the first point
in the pair (taken to be a lens) to the line of sight to the second
point (e.g. a lensed source galaxy).</li>
<li>&#8216;Arc&#8217; = the true great circle distance for spherical coordinates.</li>
</ul>
<p>(default: &#8216;Euclidean&#8217;; this value can also be given in the constructor
in the config dict.)</p>
</li>
<li><strong>num_threads</strong> &#8211; How many OpenMP threads to use during the calculation.  
(default: use the number of cpu cores; this value can also be given in
the constructor in the config dict.) Note that this won&#8217;t work if the 
system&#8217;s C compiler is clang prior to version 3.7.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="treecorr.NNNCorrelation.process_auto">
<tt class="descname">process_auto</tt><big>(</big><em>cat</em>, <em>metric=None</em>, <em>num_threads=None</em><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation.process_auto" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a single catalog, accumulating the auto-correlation.</p>
<p>This accumulates the auto-correlation for the given catalog.  After
calling this function as often as desired, the finalize() command will
finish the calculation of meand1, meanlogd1, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cat</strong> &#8211; The catalog to process</li>
<li><strong>metric</strong> &#8211; Which metric to use.  See <a class="reference internal" href="#treecorr.NNNCorrelation.process" title="treecorr.NNNCorrelation.process"><tt class="xref py py-meth docutils literal"><span class="pre">process()</span></tt></a> for 
details.  (default: &#8216;Euclidean&#8217;; this value can also be given in the 
constructor in the config dict.)</li>
<li><strong>num_threads</strong> &#8211; How many OpenMP threads to use during the calculation.  
(default: use the number of cpu cores; this value can also be given in
the constructor in the config dict.) Note that this won&#8217;t work if the 
system&#8217;s C compiler is clang prior to version 3.7.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="treecorr.NNNCorrelation.process_cross">
<tt class="descname">process_cross</tt><big>(</big><em>cat1</em>, <em>cat2</em>, <em>cat3</em>, <em>metric=None</em>, <em>num_threads=None</em><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation.process_cross" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a set of three catalogs, accumulating the 3pt cross-correlation.</p>
<p>This accumulates the cross-correlation for the given catalogs.  After
calling this function as often as desired, the finalize() command will
finish the calculation of meand1, meanlogd1, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cat1</strong> &#8211; The first catalog to process</li>
<li><strong>cat2</strong> &#8211; The second catalog to process</li>
<li><strong>cat3</strong> &#8211; The third catalog to process</li>
<li><strong>metric</strong> &#8211; Which metric to use.  See <a class="reference internal" href="#treecorr.NNNCorrelation.process" title="treecorr.NNNCorrelation.process"><tt class="xref py py-meth docutils literal"><span class="pre">process()</span></tt></a> for 
details.  (default: &#8216;Euclidean&#8217;; this value can also be given in the 
constructor in the config dict.)</li>
<li><strong>num_threads</strong> &#8211; How many OpenMP threads to use during the calculation.  
(default: use the number of cpu cores; this value can also be given in
the constructor in the config dict.) Note that this won&#8217;t work if the 
system&#8217;s C compiler is clang prior to version 3.7.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="treecorr.NNNCorrelation.process_cross21">
<tt class="descname">process_cross21</tt><big>(</big><em>cat1</em>, <em>cat2</em>, <em>metric=None</em>, <em>num_threads=None</em><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation.process_cross21" title="Permalink to this definition">¶</a></dt>
<dd><p>Process two catalogs, accumulating the 3pt cross-correlation, where two of the 
points in each triangle come from the first catalog, and one from the second.</p>
<p>This accumulates the cross-correlation for the given catalogs.  After
calling this function as often as desired, the finalize() command will
finish the calculation of meand1, meanlogd1, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cat1</strong> &#8211; The first catalog to process</li>
<li><strong>cat2</strong> &#8211; The second catalog to process</li>
<li><strong>metric</strong> &#8211; Which metric to use.  See <a class="reference internal" href="#treecorr.NNNCorrelation.process" title="treecorr.NNNCorrelation.process"><tt class="xref py py-meth docutils literal"><span class="pre">process()</span></tt></a> for 
details.  (default: &#8216;Euclidean&#8217;; this value can also be given in the 
constructor in the config dict.)</li>
<li><strong>num_threads</strong> &#8211; How many OpenMP threads to use during the calculation.  
(default: use the number of cpu cores; this value can also be given in
the constructor in the config dict.) Note that this won&#8217;t work if the 
system&#8217;s C compiler is clang prior to version 3.7.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="treecorr.NNNCorrelation.read">
<tt class="descname">read</tt><big>(</big><em>file_name</em>, <em>file_type=None</em><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in values from a file.</p>
<p>This should be a file that was written by TreeCorr, preferably a FITS file, so there
is no loss of information.</p>
<p>Warning: The NNNCorrelation object should be constructed with the same configuration 
parameters as the one being read.  e.g. the same min_sep, max_sep, etc.  This is not
checked by the read function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>file_name</strong> &#8211; The name of the file to read in.</li>
<li><strong>file_type</strong> &#8211; The type of file (&#8216;ASCII&#8217; or &#8216;FITS&#8217;).  (default: determine the type
automatically from the extension of file_name.)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="treecorr.NNNCorrelation.write">
<tt class="descname">write</tt><big>(</big><em>file_name</em>, <em>rrr=None</em>, <em>drr=None</em>, <em>rdr=None</em>, <em>rrd=None</em>, <em>ddr=None</em>, <em>drd=None</em>, <em>rdd=None</em>, <em>file_type=None</em>, <em>prec=None</em><big>)</big><a class="headerlink" href="#treecorr.NNNCorrelation.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the correlation function to the file, file_name.</p>
<p>Normally, at least rrr should be provided, but if this is None, then only the 
basic accumulated number of triangles are output (along with the columns parametrizing
the size and shape of the triangles).</p>
<p>If at least rrr is given, then it will output an estimate of the final 3pt correlation
function, <span class="math">\(\zeta\)</span>. There are two possible formulae that are currently supported.</p>
<ol class="arabic">
<li><p class="first">The simplest formula to use is <span class="math">\(\zeta^\prime = (DDD-RRR)/RRR\)</span>.
In this case, only rrr needs to be given, the NNNCorrelation of a random field.
However, note that in this case, the return value is not what is normally called
<span class="math">\(\zeta\)</span>.  Rather, this is an estimator of</p>
<div class="math">
\[\zeta^\prime(d1,d2,d3) = \zeta(d1,d2,d3) + \xi(d1) + \xi(d2) + \xi(d3)\]</div>
<p>where <span class="math">\(\xi\)</span> is the two-point correlation function for each leg of the triangle.
You would typically want to calculate that separately and subtract off the
two-point contributions.</p>
</li>
<li><p class="first">For auto-correlations, a better formula is 
<span class="math">\(\zeta = (DDD-DDR-DRD-RDD+DRR+RDR+RRD-RRR)/RRR\)</span>.
In this case, DDR, etc. calculate the triangles where two points come from either
the data or the randoms.  In the case of DDR for instance, points x1 and x2 on the 
triangle have data and x3 uses randoms, where points x1, x2, x3 are opposite sides 
d1, d2, d3 with d1 &gt; d2 &gt; d3 as usual; RDR has randoms at 1,3 and data at 2, etc.
For this case, all the combinations rrr, drr, rdr, rrd, ddr, drd, rdd must be 
provided.</p>
</li>
</ol>
<p>The output file will include the following columns:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">R_nom:</th><td class="field-body">The nominal center of the bin in R = d2 where d1 &gt; d2 &gt; d3.</td>
</tr>
<tr class="field-even field"><th class="field-name">u_nom:</th><td class="field-body">The nominal center of the bin in u = d3/d2.</td>
</tr>
<tr class="field-odd field"><th class="field-name">v_nom:</th><td class="field-body">The nominal center of the bin in v = +-(d1-d2)/d3.</td>
</tr>
<tr class="field-even field"><th class="field-name">meand1:</th><td class="field-body">The mean value <span class="math">\(\langle d1\rangle\)</span> of triangles that fell
into each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">meanlogd1:</th><td class="field-body">The mean value <span class="math">\(\langle logd1\rangle\)</span> of triangles that fell
into each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">meand2:</th><td class="field-body">The mean value <span class="math">\(\langle d2\rangle\)</span> of triangles that fell 
into each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">meanlogd2:</th><td class="field-body">The mean value <span class="math">\(\langle logd2\rangle\)</span> of triangles that fell
into each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">meand3:</th><td class="field-body">The mean value <span class="math">\(\langle d3\rangle\)</span> of triangles that fell
into each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">meanlogd3:</th><td class="field-body">The mean value <span class="math">\(\langle logd3\rangle\)</span> of triangles that fell
into each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">meanu:</th><td class="field-body">The mean value <span class="math">\(\langle u\rangle\)</span> of triangles that fell
into each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">meanv:</th><td class="field-body">The mean value <span class="math">\(\langle v\rangle\)</span> of triangles that fell
into each bin.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Then if rrr is None:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">DDD:</th><td class="field-body">The total weight of triangles in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">ntri:</th><td class="field-body">The total number of triangles in each bin.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>If rrr is given, but not the cross-correlations:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">zeta:</th><td class="field-body">The estimator <span class="math">\(\zeta^\prime = (DDD-RRR)/RRR\)</span>, which is really
<span class="math">\(\zeta(d1,d2,d3) + \xi(d1) + \xi(d2) + \xi(d3)\)</span>.  
cf. <a class="reference internal" href="#treecorr.NNNCorrelation.calculateZeta" title="treecorr.NNNCorrelation.calculateZeta"><tt class="xref py py-meth docutils literal"><span class="pre">calculateZeta()</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">sigma_zeta:</th><td class="field-body">The sqrt of the variance estimate of <span class="math">\(\zeta\)</span>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">DDD:</th><td class="field-body">The total weight of data triangles (aka DDD) in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">RRR:</th><td class="field-body">The total weight of random triangles (aka RRR) in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">ntri:</th><td class="field-body">The number of triangles contributing to each bin.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>If all cross-correlations are given:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">zeta:</th><td class="field-body">The estimator <span class="math">\(\zeta = (DDD-DDR-DRD-RDD+DRR+RDR+RRD-RRR)/RRR\)</span>.</td>
</tr>
<tr class="field-even field"><th class="field-name">sigma_zeta:</th><td class="field-body">The sqrt of the variance estimate of <span class="math">\(\zeta\)</span>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">DDD:</th><td class="field-body">The total weight of DDD triangles in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">RRR:</th><td class="field-body">The total weight of RRR triangles in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">DRR:</th><td class="field-body">The total weight of DRR triangles in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">RDR:</th><td class="field-body">The total weight of RDR triangles in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">RRD:</th><td class="field-body">The total weight of RRD triangles in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">DDR:</th><td class="field-body">The total weight of DDR triangles in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">DRD:</th><td class="field-body">The total weight of DRD triangles in each bin.</td>
</tr>
<tr class="field-even field"><th class="field-name">RDD:</th><td class="field-body">The total weight of RDD triangles in each bin.</td>
</tr>
<tr class="field-odd field"><th class="field-name">ntri:</th><td class="field-body">The number of triangles contributing to each bin.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>If <cite>sep_units</cite> was given at construction, then the distances will all be in these units.
Otherwise, they will be in either the same units as x,y,z (for flat or 3d coordinates) or
radians (for spherical coordinates).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>file_name</strong> &#8211; The name of the file to write to.</li>
<li><strong>rrr</strong> &#8211; An NNNCorrelation object for the random field. (default: None)</li>
<li><strong>drr</strong> &#8211; DRR if desired. (default: None)</li>
<li><strong>rdr</strong> &#8211; RDR if desired. (default: None)</li>
<li><strong>rrd</strong> &#8211; RRD if desired. (default: None)</li>
<li><strong>ddr</strong> &#8211; DDR if desired. (default: None)</li>
<li><strong>drd</strong> &#8211; DRD if desired. (default: None)</li>
<li><strong>rdd</strong> &#8211; RDD if desired. (default: None)</li>
<li><strong>file_type</strong> &#8211; The type of file to write (&#8216;ASCII&#8217; or &#8216;FITS&#8217;).  (default: determine
the type automatically from the extension of file_name.)</li>
<li><strong>prec</strong> &#8211; For ASCII output catalogs, the desired precision. (default: 4;
this value can also be given in the constructor in the config dict.)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="correlation3.html"
                        title="previous chapter">Three-point Correlation Functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ggg.html"
                        title="next chapter">GGG: Shear-shear-shear correlations</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/nnn.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ggg.html" title="GGG: Shear-shear-shear correlations"
             >next</a> |</li>
        <li class="right" >
          <a href="correlation3.html" title="Three-point Correlation Functions"
             >previous</a> |</li>
        <li><a href="index.html">TreeCorr  documentation</a> &raquo;</li>
          <li><a href="correlation3.html" >Three-point Correlation Functions</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Mike Jarvis.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>